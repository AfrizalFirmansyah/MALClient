<Page
    x:Class="MALClient.Pages.AnimeDetailsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MALClient.Pages"
    xmlns:xamlConverters="using:MALClient.XamlConverters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>
        <xamlConverters:VisiblityInverterConverter x:Key="VisiblityInverterConverter"/>
    </Page.Resources>
    
    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition MinHeight="150" MaxHeight="250" Height="Auto"/>
            <!--Img + Details-->
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="122"/>
                <!--Img-->
                <ColumnDefinition Width="*"/>
                <!--Details-->
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="150"/>
                <RowDefinition MinHeight="0" MaxHeight="100" Height="Auto"/>
            </Grid.RowDefinitions>
            <Image x:Name="DetailImage" Grid.Column="0" Stretch="Fill" Width="120" Height="148" Margin="1,1"/>
            <StackPanel Grid.Row="0" Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Top">
                <Button Width="50" Height="50">
                    <SymbolIcon Symbol="Globe"/>
                </Button>
                <Button x:Name="BtnAddAnime" Width="50" Height="50" Click="AddAnime">
                    <SymbolIcon Symbol="Add"/>
                </Button>
                <Button Width="50" Height="50" Visibility="{Binding ElementName=BtnAddAnime,Path=Visibility,Converter={StaticResource VisiblityInverterConverter}}" Click="RemoveAnime">
                    <SymbolIcon Symbol="Remove"/>
                </Button>
            </StackPanel>
            <StackPanel Grid.Row="0" Grid.Column="1">
                <StackPanel Orientation="Horizontal" Margin="0,1">
                    <TextBlock Text="Episodes : " />
                    <TextBlock x:Name="DetailEpisodes" Margin="2,0,0,0" FontWeight="SemiBold"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,1">
                    <TextBlock Text="Score : " />
                    <TextBlock x:Name="DetailScore" FontWeight="SemiBold" Margin="2,0,0,0"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,1" >
                    <TextBlock Text="Type : " />
                    <TextBlock x:Name="DetailType" FontWeight="SemiBold" Margin="2,0,0,0"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,1">
                    <TextBlock Text="Status : " />
                    <TextBlock x:Name="DetailStatus" FontWeight="SemiBold" Margin="2,0,0,0"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,1">
                    <TextBlock Text="Broadcasted : " />
                    <TextBlock x:Name="DetailBroadcast" FontWeight="SemiBold" Margin="2,0,0,0"/>
                </StackPanel>
            </StackPanel>
            <Grid x:Name="MyDetails" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Visibility="Collapsed">
                <MenuFlyoutSeparator VerticalAlignment="Top"/>
                <ProgressRing x:Name="SpinnerLoading" Margin="1,1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" IsActive="True" Visibility="Collapsed"  />
                <StackPanel  Orientation="Horizontal" Margin="1,10,1,0" HorizontalAlignment="Center">
                    <Button x:Name="BtnScore" Margin="1" Background="Transparent" BorderThickness="0,0,0,2" BorderBrush="{StaticResource SystemControlBackgroundAccentBrush}" Height="Auto" HorizontalAlignment="Right">
                        <Button.Flyout>
                            <MenuFlyout>
                                <MenuFlyout.Items>
                                    <MenuFlyoutItem Text="10 - Masterpiece" Click="ChangeScore"/>
                                    <MenuFlyoutItem Text="9 - Great" Click="ChangeScore"/>
                                    <MenuFlyoutItem Text="8 - Very Good" Click="ChangeScore"/>
                                    <MenuFlyoutItem Text="7 - Good" Click="ChangeScore"/>
                                    <MenuFlyoutItem Text="6 - Fine" Click="ChangeScore"/>
                                    <MenuFlyoutItem Text="5 - Average" Click="ChangeScore"/>
                                    <MenuFlyoutItem Text="4 - Bad" Click="ChangeScore"/>
                                    <MenuFlyoutItem Text="3 - Very Bad" Click="ChangeScore"/>
                                    <MenuFlyoutItem Text="2 - Horrible" Click="ChangeScore"/>
                                    <MenuFlyoutItem Text="1 - Appaling" Click="ChangeScore"/>
                                </MenuFlyout.Items>
                            </MenuFlyout>
                        </Button.Flyout>
                    </Button>
                    <Button x:Name="BtnStatus" Margin="1" Background="Transparent" BorderThickness="0,0,0,2" BorderBrush="{StaticResource SystemControlBackgroundAccentBrush}" Height="Auto" HorizontalAlignment="Right">
                        <Button.Flyout>
                            <MenuFlyout>
                                <MenuFlyout.Items>
                                    <MenuFlyoutItem Text="Watching" Click="ChangeStatus"/>
                                    <MenuFlyoutItem Text="Completed" Click="ChangeStatus"/>
                                    <MenuFlyoutItem Text="On hold" Click="ChangeStatus"/>
                                    <MenuFlyoutItem Text="Dropped" Click="ChangeStatus"/>
                                    <MenuFlyoutItem Text="Plan to watch" Click="ChangeStatus"/>
                                </MenuFlyout.Items>
                            </MenuFlyout>
                        </Button.Flyout>
                    </Button>
                    <Button x:Name="BtnWatched" Margin="1" Background="Transparent" BorderThickness="0,0,0,2" BorderBrush="{StaticResource SystemControlBackgroundAccentBrush}" Height="Auto" HorizontalAlignment="Right">
                        <Button.Flyout>
                            <MenuFlyout x:Name="BtnWatchedMenuFlyout">
                            </MenuFlyout>
                        </Button.Flyout>
                    </Button>
                </StackPanel>
            </Grid>
        </Grid>
        <MenuFlyoutSeparator Grid.Row="1" VerticalAlignment="Top"/>
        <ScrollViewer  Margin="1,10,1,0" VerticalScrollMode="Auto" Height="Auto" Grid.Row="1" VerticalAlignment="Stretch">
            <TextBlock x:Name="DetailSynopsis" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" TextWrapping="WrapWholeWords" Margin="1,1" />
        </ScrollViewer>
        
    </Grid>
</Page>
